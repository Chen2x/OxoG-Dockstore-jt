workflow:
  name:  OxoG-Dockstore
  version: "0.1.31"
  source_code: "https://github.com/Chen2x/OxoG-Dockstore-jt"

  runtime:
    docker: null

  execution:
    constraint: same_host
    memory: 4g
    cpu: 2

  input:
    vcfdir:
      type: string
    refFile:
      type: string
    donor:
      type: string
    normalBam:
      type: string
    oxoQScore:
      type: string
    out_dir:
      type: string
    snv-padding:
      type: string
    sv-padding:
      type: string
    indel-padding:
      type: string
    minibamName:
      type: string
    tumours:
      type: array
      items:
        type: object
        properties:
          tumourId:
            type: string
          bamFileName:
            type: string
          associatedVcfs:
            type: array

  output: null

  tasks:
    #
    ref_download:
      tool: ref_download
      input:
        refFile: refFile

    #parallel_download:
    #  scatter:
    #    input:
    #      tumour:
    #        with_items: tumours
    #        task_suffix: tumour.associatedVcfs
    #  tasks:   
    #    Download:
    #      tool: download
    #      input:
    #        donor: donor
    #        object_id: normalBam
    #        tumour_id: tumour.tumourId
    #        vcflist: tumour.associatedVcfs
    #      depends_on: null

    #
    # run_workflow:
    #   tool: run_workflow
    #   input:
    #     json:
    #   depends_on:
    #   - completed@vcfDownload
    #   - completed@ref_download
    #   - completed@bamDownload


tools:
  download:
    command: download.py
    input:
      donor:
        type: string
      vcflist:
        type: array
      tumour_id:
        type: string
      object_id:
        type: string
        
  ref_download:
    command: download_ref.py
    input:
      refFile:
        type: string

  # run_workflow:
  #   command: call_oxog.py
  #     input:
  #       json:
